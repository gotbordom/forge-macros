# docker/Dockerfile.ci
FROM node:18-bullseye

ARG PNPM_VERSION=8.10.0
ARG FORGE_CLI_VERSION=5.0.0

WORKDIR /work

# Ensure CA certs + curl (helps with registry/TLS issues in CI runners)
RUN apt-get update && apt-get install -y ca-certificates curl git \
  && update-ca-certificates \
  && rm -rf /var/lib/apt/lists/*

# Install pnpm + forge-cli the reliable way (avoid corepack issues)
RUN npm install -g pnpm@${PNPM_VERSION} @forge/cli@${FORGE_CLI_VERSION}

# No COPY, no ENTRYPOINT
